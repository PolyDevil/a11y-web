import { VFC, useCallback } from "react";
import { useBoolean } from "../../hooks";
import AuthForm from "./AuthForm";
import Dialog from "../Dialog";
import styles from "./styles.module.scss";

const Header: VFC = () => {
  const [isVisible, { setTrue: open, setFalse: close }] = useBoolean();

  const handleSubmit = useCallback((e: React.FormEvent) => {
    e.preventDefault();
  }, []);

  return (
    <>
      <header role="banner" className={styles.root}>
        <nav className={styles.nav}>
          <a className={styles.logo} href="/" aria-label="начальная страница">
            <img
              className={styles.logoImage}
              src="https://pushkinmuseum.art/images/svg/logo_gmii_mobile.svg"
            />
          </a>

          <form
            action="https://pushkinmuseum.art/php/search.php"
            className={styles.search}
            role="search"
            onSubmit={handleSubmit}
          >
            <label className={styles.label}>
              <input
                name="needle"
                className={styles.input}
                placeholder="Search..."
              />
            </label>
            <button className={styles.submit}>
              <svg
                aria-hidden="true"
                viewBox="0 0 32 32"
                width="32"
                height="32"
              >
                <circle
                  cx="14"
                  cy="14"
                  fill="none"
                  r="9"
                  stroke="currentColor"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  strokeMiterlimit="10"
                  strokeWidth="2"
                />
                <line
                  fill="none"
                  stroke="currentColor"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  strokeMiterlimit="10"
                  strokeWidth="2"
                  x1="27"
                  x2="20.366"
                  y1="27"
                  y2="20.366"
                />
              </svg>
              <span className="sr-only">Поиск</span>
            </button>
          </form>

          <ul className={styles.languageList} role="list">
            <li className={styles.languageItem}>
              <a
                className={styles.lang}
                href="https://pushkinmuseum.art/?lang=ru"
              >
                <abbr title="Русская версия">ru</abbr>
              </a>
            </li>
            <li>
              <a
                className={styles.lang}
                href="https://pushkinmuseum.art/?lang=en"
              >
                <abbr title="Английская версия">en</abbr>
              </a>
            </li>
          </ul>

          <button className={styles.profile} onClick={open}>
            <span className="sr-only">Войти в аккаунт</span>
            <svg
              width="46"
              height="46"
              viewBox="0 0 46 46"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              aria-hidden="true"
            >
              <path
                d="M22.6723 22.1584C25.7165 22.1584 28.3521 21.0666 30.5063 18.9124C32.6597 16.7586 33.7519 14.1233 33.7519 11.0788C33.7519 8.03539 32.6601 5.39974 30.5059 3.24525C28.3518 1.09181 25.7161 0 22.6723 0C19.6278 0 16.9925 1.09181 14.8387 3.2456C12.6849 5.39939 11.5928 8.03503 11.5928 11.0788C11.5928 14.1233 12.6849 16.759 14.8387 18.9128C16.9932 21.0662 19.6289 22.1584 22.6723 22.1584ZM16.7451 5.15162C18.3977 3.49899 20.3364 2.69566 22.6723 2.69566C25.0079 2.69566 26.9469 3.49899 28.5999 5.15162C30.2525 6.8046 31.0562 8.74361 31.0562 11.0788C31.0562 13.4148 30.2525 15.3534 28.5999 17.0064C26.9469 18.6594 25.0079 19.4627 22.6723 19.4627C20.3371 19.4627 18.3984 18.659 16.7451 17.0064C15.0921 15.3538 14.2884 13.4148 14.2884 11.0788C14.2884 8.74361 15.0921 6.8046 16.7451 5.15162Z"
                fill="currentColor"
              />
              <path
                d="M42.0585 35.3718C41.9963 34.4754 41.8707 33.4977 41.6857 32.4652C41.499 31.425 41.2586 30.4416 40.9709 29.5428C40.6732 28.6138 40.2693 27.6964 39.7692 26.8173C39.2508 25.9048 38.6416 25.1103 37.9579 24.4565C37.243 23.7725 36.3678 23.2225 35.3556 22.8214C34.347 22.4223 33.2292 22.2202 32.0335 22.2202C31.5639 22.2202 31.1098 22.4129 30.2328 22.9839C29.693 23.3359 29.0616 23.743 28.3569 24.1932C27.7543 24.5772 26.938 24.9369 25.9297 25.2626C24.946 25.5809 23.9472 25.7423 22.961 25.7423C21.9756 25.7423 20.9768 25.5809 19.9923 25.2626C18.9851 24.9373 18.1684 24.5775 17.5669 24.1936C16.8689 23.7475 16.2372 23.3404 15.6893 22.9835C14.813 22.4125 14.3589 22.2198 13.8893 22.2198C12.6932 22.2198 11.5758 22.4223 10.5675 22.8217C9.55608 23.2222 8.68045 23.7721 7.96486 24.4568C7.2812 25.111 6.67195 25.9052 6.15395 26.8173C5.65454 27.6964 5.25024 28.6135 4.95264 29.5432C4.66521 30.4419 4.4248 31.425 4.2381 32.4652C4.0528 33.4963 3.92751 34.4744 3.86539 35.3728C3.80432 36.2512 3.77344 37.1655 3.77344 38.0892C3.77344 40.4904 4.53676 42.4343 6.04199 43.8679C7.52863 45.2826 9.49536 46 11.8878 46H34.0371C36.4288 46 38.3956 45.2826 39.8826 43.8679C41.3881 42.4354 42.1515 40.4907 42.1515 38.0888C42.1511 37.162 42.1199 36.2477 42.0585 35.3718ZM38.0239 41.9149C37.0416 42.8498 35.7375 43.3043 34.0367 43.3043H11.8878C10.1867 43.3043 8.8826 42.8498 7.90063 41.9152C6.93727 40.9982 6.4691 39.7464 6.4691 38.0892C6.4691 37.2272 6.49753 36.3762 6.55438 35.5592C6.60983 34.7576 6.72319 33.8771 6.8913 32.9414C7.0573 32.0174 7.26857 31.1502 7.51985 30.3651C7.76096 29.6123 8.0898 28.8669 8.4976 28.1488C8.88681 27.4645 9.33463 26.8773 9.82877 26.4042C10.291 25.9617 10.8736 25.5995 11.56 25.3279C12.1949 25.0766 12.9084 24.939 13.6829 24.9183C13.7773 24.9685 13.9454 25.0643 14.2178 25.2419C14.7719 25.603 15.4107 26.015 16.1168 26.466C16.9127 26.9735 17.9382 27.4318 19.1634 27.8274C20.4159 28.2323 21.6934 28.438 22.9614 28.438C24.2294 28.438 25.5072 28.2323 26.759 27.8277C27.9853 27.4315 29.0104 26.9735 29.8074 26.4653C30.53 26.0035 31.1509 25.6034 31.705 25.2419C31.9774 25.0647 32.1455 24.9685 32.2399 24.9183C33.0148 24.939 33.7283 25.0766 34.3635 25.3279C35.0496 25.5995 35.6322 25.962 36.0944 26.4042C36.5885 26.877 37.0363 27.4641 37.4255 28.1492C37.8337 28.8669 38.1629 29.6126 38.4036 30.3647C38.6553 31.1509 38.8669 32.0177 39.0325 32.9411C39.2003 33.8785 39.314 34.7593 39.3695 35.5595V35.5602C39.4267 36.3741 39.4554 37.2248 39.4558 38.0892C39.4554 39.7467 38.9873 40.9982 38.0239 41.9149Z"
                fill="currentColor"
              />
            </svg>
          </button>
        </nav>
      </header>

      <Dialog title="Вход" onClose={close} visible={isVisible}>
        <AuthForm />
      </Dialog>
    </>
  );
};

export default Header;
